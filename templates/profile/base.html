<!DOCTYPE html>

<html>
<head>
    <title>StudentCity | {% block title %}Dashboard{% endblock title %}</title>
    <link rel="stylesheet" type="text/css" href="/static/css/base.css" />
    
    <script type="text/javascript" src="/static/javascript/jquery.js"></script>
    <script type="text/javascript" src="/static/javascript/validate.js"></script>
    <script type="text/javascript" src="/static/javascript/custom_functions.js"></script>

    <script>
    $( document ).ready( function () {
        
        $( "#date" ).html(makeDate());
        clearOrRestoreSearchBar();
        /*
        $( ".course_tile" ).click( function () {
            $( ".course_tile" ).css( "background-image", "url(./images/course_tile.png)" );
            $(this).css( "background-image", "url(./images/course_tile_long.png)" );
            
            $.get("includes/course_info.php", { id: $(this).attr("id") }, function (data) {
                $( "#right_side" ).html(data);
            });
        });
        
        $("#submit").click(function(e) { 
            e.preventDefault();
            
            $.get("includes/search.php", { term: $("#main_search").val() }, function (data) {
                openMyModal(data);
            });
        });
        
        $("#settings_link").click(function(e) { 
            e.preventDefault();
            
            $.get("includes/dashboard_settings.php", 0, function (data) {
                openMyModal(data);
            });
        });
        */
        $(".search_person").click(function(e) {
            e.preventDefault();
            
            alert($(this).attr("id"));
        });
    });
    
    function makeDate() {
        var m_names = new Array("January", "February", "March", "April", "May", 
        "June", "July", "August", "September", "October", "November", "December");

        var d = new Date();
        var curr_date = d.getDate();
        var curr_month = d.getMonth();
        var curr_year = d.getFullYear();
        return m_names[curr_month] + " " + curr_date + ", " + curr_year;    
    }
    
    function clearOrRestoreSearchBar() {
        // If the box says "Search site" then clear it.
        $("#main_search").focus(function() {
            if ( $(this).val() == "Search site" ) {
                $(this).attr("value", "");
            }
        });
        
        // If the box has nothing in it when it loses focus, then put in Search sit.
        $("#main_search").focusout(function() {
            if ( $(this).val() == "" ) {
                $(this).attr("value", "Search site");
            }
        });
    }    
    </script>
</head>

<body id="dashboard">    
    <div id="header">
        <div id="logo"></div>
        <div id="header_wrapper">
            <div class="float_left">
                <h3>Welcome {% block username %}Mr. Unknown User{% endblock username %}!</h3>
                <h3 id="date"></h3>
            </div>
            
            <div class="float_right">
                <h3 style="text-align: right"><a href="" id="settings_link">Settings</a> | <a href="index.php?logout=1" id="logout">Logout</a></h3>
                <form id="site_search">
                    <input id="submit" class="search_submit" type="submit" value="" />
                    <input id="main_search" type="text" value="Search site" />
                </form>
            </div>
         </div>
    </div>
    <div id="wrapper" class="index">
        <div id="left_side" class="float_left" style="background-color:white; position:relative;">
        {% block left_side %}
            <h3>Classes:</h3>
            {% for course_detail in courses %}
                <div class="course_tile" id="{{ course_detail.course.course_code }}">
                    <div class="text">
                        <h2>{{ course_detail.course.course_name }}</h2>
                        <h6>Currents: {{ course_detail.get_num_current_students }}. | Veterans: {{ get_num_past_students }}. </h6>
                        </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% endblock left_side %}
        </div>
        
        <div id="right_side" class="float_right">
        {% block main_content %}
            <h1>Welcome to Student City!</h1>
            <p>
            If you already have classes, click on one to the left to get started. If you don't have any classes, why are you at school!? Go home! Or, you can just add some by entering in the name of your class in the search bar and adding it from there.
            </p>
        {% endblock main_content %}
        </div>
    </div>
    
    <div class="clear"></div>
    <div id="footer"></div>
</body>
</html>